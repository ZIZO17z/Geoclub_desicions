<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>October Geology Club - Application Status</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600&family=Paytone+One&family=Montserrat:wght@500;600&display=swap" rel="stylesheet">
    
    <!-- Icons (FontAwesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Canvas Confetti for "زينة" (Celebration Animation) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Tailwind Config for Custom Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-bg': '#140c08',
                        'brand-bg-dark': '#0a0502',
                        'brand-gold': '#ffb03a',
                        'brand-subtitle': '#b58b59',
                        'brand-card': '#1a100a',
                        'brand-card-border': '#2d1c11',
                        'brand-input-bg': '#140c08',
                        'brand-input-border': '#362215',
                        'brand-btn-active': '#7c3a15',
                        'brand-btn-hover': '#904318',
                        'brand-text-muted': '#a39081'
                    },
                    fontFamily: {
                        'title': ['"Paytone One"', 'sans-serif'],
                        'body': ['"Outfit"', 'sans-serif'],
                        'mono': ['"Montserrat"', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background: linear-gradient(180deg, #24140d 0%, #0a0502 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .decorative-line {
            height: 1px;
            background: linear-gradient(90deg, transparent, #b58b59, transparent);
            flex-grow: 1;
        }

        .view-section {
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
        }

        .view-hidden {
            opacity: 0;
            pointer-events: none;
            transform: scale(0.95);
            z-index: 0;
        }

        .view-active {
            opacity: 1;
            pointer-events: auto;
            transform: scale(1);
            z-index: 10;
        }
        
        .relative-wrapper {
            position: relative;
            width: 100%;
            min-height: 500px;
        }

        .social-btn {
            transition: all 0.3s ease;
        }
        
        .social-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        /* Custom Input Focus */
        input:focus {
            outline: none;
            border-color: #7c3a15;
            box-shadow: 0 0 0 2px rgba(124, 58, 21, 0.3);
        }
        
        /* Loading spinner */
        .loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Logo Placeholder CSS */
        .logo-container {
            width: 160px;
            height: 160px;
            background: #fdf5e6;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            border: 2px solid #e2d1bc;
        }
        
        .logo-inner-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 10px;
        }

        /* Video Styles */
        #video-view {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100;
            background: black;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #decision-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        @media (max-width: 768px) {
            #video-view {
                padding: 20px;
                background: rgba(0, 0, 0, 0.95);
            }
            #decision-video {
                border-radius: 12px;
                object-fit: contain;
                height: auto;
                max-height: 90vh;
            }
            .logo-container {
                width: 120px;
                height: 120px;
            }
            h1 { font-size: 2.5rem; }
        }
    </style>
</head>
<body class="font-body antialiased flex flex-col items-center pt-8 md:pt-16 px-4">

    <!-- FULLSCREEN VIDEO VIEW -->
    <div id="video-view" class="fixed inset-0 z-[100] bg-black transition-opacity duration-500 opacity-0 pointer-events-none flex items-center justify-center">
        <video id="decision-video" class="w-full h-full object-cover" playsinline>
            <source src="https://res.cloudinary.com/dvoliddxf/video/upload/v1772100298/video_l5kftq.mp4" type="video/mp4">
        </video>
    </div>

    <!-- Audio elements for transition effect -->
    <audio id="transition-audio" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3" preload="auto"></audio>
    <audio id="success-audio" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" preload="auto"></audio>
    
    <div class="w-full max-w-md mx-auto z-10 relative">
        
        <!-- Header / Logo Area -->
        <div class="text-center mb-8 animate-fade-in">
            <div class="logo-container mb-6">
                <!-- Fallback to a geology icon if the specific image URL isn't loaded -->
                <img src="logo.ico" alt="OGC Logo" class="logo-inner-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3220/3220815.png'">
            </div>
            
            <h1 class="font-title text-4xl md:text-5xl text-brand-gold mb-4 leading-tight tracking-wide" style="text-shadow: 0 4px 10px rgba(0,0,0,0.5);">
                October Geology<br>Club
            </h1>
            
            <div class="flex items-center justify-center gap-4 text-brand-subtitle font-mono text-xs font-semibold tracking-[0.2em]">
                <div class="decorative-line"></div>
                <span>APPLICATION STATUS PORTAL</span>
                <div class="decorative-line"></div>
            </div>
        </div>

        <div class="relative-wrapper">
            <!-- PORTAL FORM VIEW -->
            <div id="form-view" class="view-section view-active">
                <div class="bg-brand-card border border-brand-card-border rounded-2xl p-6 md:p-8 shadow-2xl">
                    
                    <p class="text-brand-text-muted text-center text-sm mb-6 font-medium">
                        Enter your email or phone to reveal your application decision.
                    </p>

                    <!-- Tabs -->
                    <div class="flex bg-brand-input-bg rounded-xl p-1 mb-6 border border-brand-card-border">
                        <button id="tab-email" onclick="switchTab('email')" class="flex-1 py-3 text-sm font-semibold rounded-lg bg-brand-btn-active text-white transition-all flex items-center justify-center gap-2">
                            <i class="fa-regular fa-envelope"></i> Email
                        </button>
                        <button id="tab-phone" onclick="switchTab('phone')" class="flex-1 py-3 text-sm font-semibold rounded-lg text-brand-text-muted hover:text-white transition-all flex items-center justify-center gap-2">
                            <i class="fa-solid fa-phone-volume"></i> Phone
                        </button>
                    </div>

                    <!-- Input Form -->
                    <form id="check-form" onsubmit="handleCheck(event)">
                        <div class="mb-6 relative">
                            <input 
                                type="text" 
                                id="user-input" 
                                placeholder="your.email@example.com" 
                                class="w-full bg-brand-input-bg border border-brand-input-border text-white text-sm rounded-xl px-5 py-4 transition-all"
                                required
                            >
                            <!-- Error Message -->
                            <p id="error-msg" class="text-red-400 text-xs mt-2 absolute -bottom-5 left-0 hidden">
                                <i class="fa-solid fa-circle-exclamation mr-1"></i> Application not found. Please try again.
                            </p>
                        </div>

                        <button type="submit" id="submit-btn" class="w-full bg-brand-btn-active hover:bg-brand-btn-hover text-white font-bold py-4 rounded-xl transition-all shadow-lg flex justify-center items-center gap-2">
                            <span>Check My Status</span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- RESULT VIEW -->
            <div id="result-view" class="view-section view-hidden">
                <div id="result-card" class="bg-brand-card border border-brand-card-border rounded-2xl p-8 shadow-2xl text-center transform transition-all duration-700">
                    
                    <!-- Dynamic Content Container -->
                    <div id="result-content">
                        <!-- Filled by JS -->
                    </div>

                    <!-- Social Links -->
                    <div class="mt-8 border-t border-brand-input-border pt-6">
                        <p class="text-xs text-brand-text-muted mb-4 font-mono tracking-widest uppercase">Connect With Us</p>
                        <div id="social-links" class="flex justify-center gap-4 flex-wrap">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <button onclick="resetForm()" class="mt-8 text-brand-text-muted hover:text-white text-sm font-medium transition-colors underline underline-offset-4 decoration-brand-text-muted/30">
                        Check another application
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-brand-text-muted/50 text-xs pb-8 font-mono tracking-wide">
            Powered by the forces of the Earth • OGC 2026
        </div>

    </div>

    <script>
        // --- DATASET ---
        const applicants = [
            { name: "Taha Yassin", emails: ["taha.yasin0124@gmail.com"], phones: ["01014946160"], status: "rejected" },
            { name: "Habiba Emad", emails: ["habiba.2025514@stemmenof.moe.edu.eg"], phones: ["01276977268"], status: "accepted" },
            { name: "Mariam Talaat Abdou", emails: ["mariam.1125571@stemmaadi.moe.edu.eg"], phones: ["01105338874"], status: "accepted" },
            { name: "Omar Mohamed Elwakeel", emails: ["omar.2125051@stemobour.moe.edu.eg"], phones: ["01015238222"], status: "accepted" },
            { name: "Login Elsayed", emails: ["loginelsayed651@gmail.com"], phones: ["01100104084"], status: "accepted" },
            { name: "Adnan Amr Abdel-Azeem Refai", emails: ["adnandidoo77@gmail.com"], phones: ["01014103943"], status: "accepted" },
            { name: "Mohammed Reda Fathy Anbar", emails: ["mohammedanbar25092010@gmail.com"], phones: ["01040384687"], status: "accepted" },
            { name: "Ahmed Mohamed Rashed Rashad", emails: ["777rashed0@gmail.com"], phones: ["01022129788"], status: "accepted" },
            { name: "Tasneem Mahmoud Abdel-Aziz", emails: ["tasneem.1125512@stemmaadi.moe.edu.eg"], phones: ["01064507555"], status: "accepted" },
            { name: "Remas Yousry", emails: ["remas.1825701@stemksheik.moe.edu.eg"], phones: ["01062732719"], status: "accepted" },
            { name: "Saira Maryam", emails: ["saeramaryam@gmail.com"], phones: ["0325-94438302", "032594438302"], status: "accepted" },
            { name: "Cynthia Wachira", emails: ["wachukae73@gmail.com"], phones: ["0746221553"], status: "accepted" },
            { name: "Yvette Montes Rodriguez", emails: ["yveschoolmontrro@gmail.com"], phones: ["960626587"], status: "accepted" },
            { name: "Tollen Bahsa", emails: ["hilxt442@gmail.com"], phones: ["9660536747802"], status: "accepted" },
            { name: "Joseph Ilderson", emails: ["josephildersonc2007@gmail.com"], phones: ["+50946983539", "50946983539", "509 46983539"], status: "accepted" },
            { name: "Nora Tantawy", emails: ["nora.2325539@stemqena.moe.edu.eg"], phones: ["01143867959"], status: "accepted" },
            { name: "Habiba Mohammed Kamal", emails: ["biboohabibakamal@gmail.com"], phones: ["01121098982"], status: "accepted" },
            { name: "Mery Rouss Hidalgo", emails: ["rociomedinaflores186@gmail.com"], phones: ["+59177013324", "59177013324", "+591 77013324"], status: "accepted" },
            { name: "Ahmed Abdelrahman Ahmed Ewis", emails: ["ahmed.1425008@stembsweif.moe.edu.eg"], phones: ["01277054466"], status: "accepted" },
            { name: "Nour Ali Abdelrazek Ali", emails: ["nour.1125599@stemmaadi.moe.edu.eg"], phones: ["01200709971"], status: "accepted" },
            { name: "Ahmed Hossam Abdel Fattah Hassan", emails: ["ahmed.1025051@stemoctober.moe.edu.eg"], phones: ["01155452223"], status: "accepted" },
            { name: "Toqa Mohamed", emails: ["toqa.1525516@stemluxor.moe.edu.eg"], phones: ["01068582932"], status: "accepted" },
            { name: "Mohamed Mohamed Gamal", emails: ["mohamed.1025115@stemoctober.moe.edu.eg"], phones: ["01558525460"], status: "accepted" },
        ];

        // --- SOCIAL LINKS CONSTANTS (From your file) ---
        const links = {
            whatsapp: { url: "https://chat.whatsapp.com/EZ46NTuL8mP6nVIEhDAF8m", icon: "fa-brands fa-whatsapp", color: "bg-[#25D366]" },
            linkedin: { url: "https://www.linkedin.com/company/october-geology-club-ogc/", icon: "fa-brands fa-linkedin-in", color: "bg-[#0A66C2]" },
            instagram: { url: "https://www.instagram.com/octgeologyclub?igsh=dXF0YXVxMmc0dWN0", icon: "fa-brands fa-instagram", color: "bg-gradient-to-tr from-[#f09433] via-[#dc2743] to-[#bc1888]" },
            facebook: { url: "https://www.facebook.com/share/1AmCLVjYeu/", icon: "fa-brands fa-facebook-f", color: "bg-[#1877F2]" }
        };

        let currentMode = 'email';

        // --- FUNCTIONS ---
        
        // Tab Switcher
        function switchTab(mode) {
            currentMode = mode;
            const tabEmail = document.getElementById('tab-email');
            const tabPhone = document.getElementById('tab-phone');
            const inputField = document.getElementById('user-input');
            const errorMsg = document.getElementById('error-msg');
            
            errorMsg.classList.add('hidden');
            inputField.value = '';

            if (mode === 'email') {
                tabEmail.className = "flex-1 py-3 text-sm font-semibold rounded-lg bg-brand-btn-active text-white transition-all flex items-center justify-center gap-2";
                tabPhone.className = "flex-1 py-3 text-sm font-semibold rounded-lg text-brand-text-muted hover:text-white transition-all flex items-center justify-center gap-2";
                inputField.type = 'email';
                inputField.placeholder = 'your.email@example.com';
            } else {
                tabPhone.className = "flex-1 py-3 text-sm font-semibold rounded-lg bg-brand-btn-active text-white transition-all flex items-center justify-center gap-2";
                tabEmail.className = "flex-1 py-3 text-sm font-semibold rounded-lg text-brand-text-muted hover:text-white transition-all flex items-center justify-center gap-2";
                inputField.type = 'tel';
                inputField.placeholder = 'e.g. 01014946160 or +591...';
            }
        }

        // Form Submit Handler
        async function handleCheck(e) {
            e.preventDefault();
            
            const query = document.getElementById('user-input').value.trim().toLowerCase();
            const errorMsg = document.getElementById('error-msg');
            const submitBtn = document.getElementById('submit-btn');
            
            if(!query) return;

            errorMsg.classList.add('hidden');
            submitBtn.innerHTML = '<span class="loader"></span> Processing...';
            submitBtn.disabled = true;

            await new Promise(r => setTimeout(r, 600)); // Slightly shorter delay as video adds suspense

            let foundApplicant = null;
            
            for (let app of applicants) {
                if (currentMode === 'email') {
                    if (app.emails.some(email => email.toLowerCase() === query)) {
                        foundApplicant = app;
                        break;
                    }
                } else {
                    const normalizedQuery = query.replace(/[\s-]/g, '');
                    if (app.phones.some(phone => phone.replace(/[\s-]/g, '').includes(normalizedQuery))) {
                        foundApplicant = app;
                        break;
                    }
                }
            }

            if (foundApplicant) {
                // Play video overlay transition BEFORE showing result
                playVideoThenShowResult(foundApplicant);
            } else {
                errorMsg.classList.remove('hidden');
                submitBtn.innerHTML = '<span>Check My Status</span>';
                submitBtn.disabled = false;
            }
        }

        // --- VIDEO TRANSITION LOGIC ---
        function playVideoThenShowResult(applicant) {
            const formView = document.getElementById('form-view');
            const videoView = document.getElementById('video-view');
            const video = document.getElementById('decision-video');

            // 1. Hide form
            formView.classList.remove('view-active');
            formView.classList.add('view-hidden');
            
            setTimeout(() => {
                // Show fullscreen video view
                videoView.classList.remove('opacity-0', 'pointer-events-none');
                videoView.classList.add('opacity-100', 'pointer-events-auto');
                
                // 2. Play video
                video.currentTime = 0;
                const playPromise = video.play();
                
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log("Auto-play prevented", error);
                        finishVideoAndShowResult(applicant);
                    });
                }
            }, 300);

            // 3. When video ends, go to result
            video.onended = () => {
                finishVideoAndShowResult(applicant);
            };
        }

        function finishVideoAndShowResult(applicant) {
            const videoView = document.getElementById('video-view');
            videoView.classList.remove('opacity-100', 'pointer-events-auto');
            videoView.classList.add('opacity-0', 'pointer-events-none');
            
            setTimeout(() => {
                showResult(applicant);
            }, 500);
        }

        // Build the HTML for social links using exact format from uploaded file
        function buildSocialLink(platform) {
            const data = links[platform];
            return `
                <a href="${data.url}" target="_blank" class="social-btn w-12 h-12 rounded-full text-white flex items-center justify-center text-xl ${data.color}">
                    <i class="${data.icon}"></i>
                </a>
            `;
        }

        // Show Final Result Screen
        function showResult(applicant) {
            const resultView = document.getElementById('result-view');
            const resultContent = document.getElementById('result-content');
            const socialLinks = document.getElementById('social-links');
            const audioTransition = document.getElementById('transition-audio');
            const audioSuccess = document.getElementById('success-audio');

            // 1. Play Audio (Transition Whoosh)
            audioTransition.currentTime = 0;
            audioTransition.play().catch(e => console.log("Audio play blocked by browser:", e));

            const isAccepted = applicant.status === "accepted";
            
            let nameHTML = `<h2 class="text-2xl md:text-3xl font-bold mb-2 text-white">${applicant.name}</h2>`;
            let statusHTML = '';
            let socialHTML = '';

            if (isAccepted) {
                statusHTML = `
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-green-500/20 text-green-400 mb-6">
                        <i class="fa-solid fa-check text-4xl"></i>
                    </div>
                    ${nameHTML}
                    <div class="text-brand-gold font-title text-xl mb-4 tracking-wider uppercase">Congratulations!</div>
                    <p class="text-brand-text-muted text-sm leading-relaxed mb-6">
                        You have been officially <strong class="text-green-400">Accepted</strong> into the October Geology Club! We are thrilled to have you join us. Please join our community groups below to get started.
                    </p>
                `;
                
                // All Links including WhatsApp 
                socialHTML = `
                    ${buildSocialLink('whatsapp')}
                    ${buildSocialLink('linkedin')}
                    ${buildSocialLink('instagram')}
                    ${buildSocialLink('facebook')}
                `;

                // Play Success Audio and Fire Confetti
                setTimeout(() => {
                    audioSuccess.currentTime = 0;
                    audioSuccess.play().catch(e => console.log(e));
                    fireConfetti();
                }, 400);

            } else {
                statusHTML = `
                    <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-red-500/10 text-brand-text-muted mb-6">
                        <i class="fa-solid fa-envelope-open-text text-3xl"></i>
                    </div>
                    ${nameHTML}
                    <div class="text-white/80 font-semibold text-lg mb-4">Update on your application</div>
                    <p class="text-brand-text-muted text-sm leading-relaxed mb-6">
                        Thank you for your interest in joining the October Geology Club. Unfortunately, we are unable to offer you a spot at this time. We had many highly qualified applicants. We encourage you to follow our socials and apply again in the future!
                    </p>
                `;

                // Links EXCEPT WhatsApp
                socialHTML = `
                    ${buildSocialLink('linkedin')}
                    ${buildSocialLink('instagram')}
                    ${buildSocialLink('facebook')}
                `;
            }

            resultContent.innerHTML = statusHTML;
            socialLinks.innerHTML = socialHTML;

            // Display Result Block
            resultView.classList.remove('view-hidden');
            resultView.classList.add('view-active');
            
            // Re-enable the submit button underneath
            const submitBtn = document.getElementById('submit-btn');
            submitBtn.innerHTML = '<span>Check My Status</span>';
            submitBtn.disabled = false;
        }

        // Reset Form
        function resetForm() {
            const formView = document.getElementById('form-view');
            const resultView = document.getElementById('result-view');
            const inputField = document.getElementById('user-input');

            inputField.value = '';
            
            resultView.classList.remove('view-active');
            resultView.classList.add('view-hidden');
            
            setTimeout(() => {
                formView.classList.remove('view-hidden');
                formView.classList.add('view-active');
                inputField.focus();
            }, 300);
        }

        // Beautiful Confetti (زينة) Logic (From your uploaded file)
        function fireConfetti() {
            var duration = 3000;
            var end = Date.now() + duration;

            (function frame() {
                // Launch confetti from left and right edges
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0, y: 0.8 },
                    colors: ['#ffb03a', '#ffffff', '#7c3a15']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1, y: 0.8 },
                    colors: ['#ffb03a', '#ffffff', '#7c3a15']
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }
    </script>
</body>
</html>

